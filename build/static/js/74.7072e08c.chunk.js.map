{"version":3,"file":"static/js/74.7072e08c.chunk.js","mappings":"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","sources":["components/errorMessage/ErrorMessage.js","components/appComicsList/appComicsList.js","components/pages/ComicsPage.js"],"sourcesContent":["import errorImg from './giphy.webp'\r\nimport './errorMessage.scss'\r\nconst ErrorMessage = () => {\r\n   return (\r\n      <img src={errorImg} alt='error' className='error' />\r\n   )\r\n};\r\n\r\n\r\nexport default ErrorMessage;","import { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport useMarvelService from \"../../services/MarvelService\"\r\nimport Skeleton from '@mui/material/Skeleton';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\nimport Loading from '../spiner/Spiner'\r\nimport './appComicsList.scss'\r\n\r\nconst ComicsList = () => {\r\n   const [comics, setComics] = useState([]);\r\n   const [newOffset, setNewOffset] = useState(0);\r\n   const [firstLoading, setFirstLoading] = useState(true)\r\n   const [noMoreHeroesInDataFromServer, setNoMoreHeroesInDataFromServer] = useState(false);\r\n   const { getAllComics, loading, clearError, process, setProcess } = useMarvelService();\r\n\r\n   useEffect(() => {\r\n      getAllComics().then(res =>\r\n         setComics(prevComics => [...prevComics, ...res.map(comic => ({ ...comic, active: false }))]))\r\n         .finally(() => {\r\n            setFirstLoading(false)\r\n         })\r\n      renderComics()\r\n      clearError()\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n   }, [])\r\n\r\n   const getNewComics = (newOffset) => {\r\n      getAllComics(newOffset).then(res => {\r\n         if (res.length < 8) {\r\n            setNoMoreHeroesInDataFromServer(true);\r\n         }\r\n         setComics(prevComics => [...prevComics, ...res.map(comic => ({ ...comic, active: false }))])\r\n      }).then(() => setProcess('confirmed'))\r\n      setNewOffset(prevOffset => prevOffset + 8)\r\n   }\r\n\r\n   const preLoadSkeleton = () => {\r\n      const arraySkeleton = [];\r\n      for (let i = 0; i < 8; i++) {\r\n         arraySkeleton.push(<li key={i}>\r\n            <Skeleton variant=\"rectangular\" width={225} height={346} animation=\"wave\" />\r\n            <Skeleton height={36} animation=\"wave\" />\r\n            <Skeleton width=\"30%\" animation=\"wave\" />\r\n         </li>)\r\n      }\r\n      return arraySkeleton;\r\n   }\r\n\r\n   const onChangeActivehero = (id) => {\r\n      const updatedComics = comics.map(hero => {\r\n         return hero.id === id ? { ...hero, active: true } : { ...hero, active: false }\r\n      });\r\n      setComics(updatedComics)\r\n   }\r\n\r\n   const renderComics = () => {\r\n\r\n      return comics.map(item => {\r\n         const classActive = item.active ? 'selected' : null;\r\n         let imgStyle = { 'objectFit': 'cover' };\r\n\r\n         const handleClick = () => {\r\n            onChangeActivehero(item.id);\r\n         };\r\n         if (item.thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {\r\n            imgStyle = { 'objectFit': 'unset' };\r\n         }\r\n\r\n         const handleKeyDown = (event) => {\r\n            if (event.key === 'Enter' || event.key === ' ') {\r\n               handleClick();\r\n            }\r\n         };\r\n\r\n         return (\r\n            <Link\r\n               to={`/comics/${item.id}`}\r\n               key={item.id}\r\n               tabIndex={0}\r\n               className={classActive}\r\n               onClick={handleClick}\r\n               onKeyDown={handleKeyDown}>\r\n               <img src={item.thumbnail} style={imgStyle} alt=\"comics\" />\r\n               <div className='comicsTitle'>{item.title}</div>\r\n               <div className='price'>{item.price}</div>\r\n            </Link>\r\n         )\r\n      })\r\n   }\r\n\r\n   const buttonRender = () => {\r\n      return (\r\n         <button className=\"button button__main button__long\" onClick={() => getNewComics(newOffset + 8)}>\r\n            <div className=\"inner\">load more</div>\r\n         </button>\r\n      )\r\n   }\r\n\r\n   const setContent = (process, Component) => {\r\n      switch (process) {\r\n         case 'waiting':\r\n         case 'loading':\r\n            return firstLoading ? preLoadSkeleton() : <Component />\r\n         case 'confirmed':\r\n            return renderComics()\r\n         case 'error':\r\n            return <ErrorMessage />\r\n         default:\r\n            throw new Error(\"Quelque chose s'est mal passe\")\r\n      }\r\n   }\r\n\r\n   let button = loading && !firstLoading ? <Loading /> : buttonRender();\r\n\r\n   if (noMoreHeroesInDataFromServer) {\r\n      button = null\r\n   }\r\n\r\n   return (\r\n      <div>\r\n         <ul className='comicsWrapper'>\r\n            {setContent(process, () => renderComics())}\r\n         </ul>\r\n         {button}\r\n      </div>\r\n   )\r\n\r\n}\r\n\r\nexport default ComicsList;","import { Helmet } from \"react-helmet\"\r\nimport ComicsHeader from '../appHeaderComics/appHeaderComics'\r\nimport ComicsList from '../appComicsList/appComicsList'\r\n\r\nconst ComicsPage = () => {\r\n\r\n   return (\r\n      <>\r\n         <Helmet>\r\n            <meta name=\"description\"\r\n               content=\"Site about Marvel Universe and its heroes\" />\r\n            <title>Marvel Comics</title>\r\n         </Helmet>\r\n         <ComicsHeader />\r\n         <ComicsList />\r\n      </>\r\n   )\r\n}\r\n\r\nexport default ComicsPage"],"names":["ErrorMessage","_jsx","src","errorImg","alt","className","ComicsList","comics","setComics","useState","newOffset","setNewOffset","firstLoading","setFirstLoading","noMoreHeroesInDataFromServer","setNoMoreHeroesInDataFromServer","getAllComics","loading","clearError","process","setProcess","useMarvelService","useEffect","then","res","prevComics","map","comic","active","finally","renderComics","item","classActive","imgStyle","handleClick","id","updatedComics","hero","onChangeActivehero","thumbnail","_jsxs","Link","to","concat","tabIndex","onClick","onKeyDown","event","key","children","style","title","price","button","Loading","length","prevOffset","getNewComics","setContent","Component","preLoadSkeleton","arraySkeleton","i","push","Skeleton","variant","width","height","animation","Error","ComicsPage","_Fragment","Helmet","name","content","ComicsHeader"],"sourceRoot":""}